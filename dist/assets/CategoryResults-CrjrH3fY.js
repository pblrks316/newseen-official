import{_ as F,a as N,F as R,I as S}from"./IconNewSeen-BZEH1aMv.js";import{_ as q,a as D,b as E}from"./CardNews-C7kylbaT.js";import{r as l,o as M,A as B,c as i,a as m,b as n,d as c,e as y,u as _,s as C,F as T,f as A,g as o}from"./index-BDEM5uhp.js";const G={key:0},J={class:"sticky top-0 z-100"},V={class:"sm:px-8 lg:px-16 h-full py-5"},I={class:"w-full h-full py-5 overflow-x-auto"},L={class:"flex flex-nowrap gap-x-7 py-5"},O={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},z={class:"animate-spin"},H={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},K={__name:"CategoryResults",setup(P){const u=C(),s=l("2"),r=l("1"),h=l(null),p=l(),f="https://api.newseen.com",v=e=>{const t=new Date(e),a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$=a[t.getDay()],x=t.getDate(),b=d[t.getMonth()],j=t.getFullYear();return`${$}, ${x} ${b} ${j}`},w=async()=>{try{const e=await fetch("https://api.newseen.com/api/myinfo",{method:"GET",headers:{accept:"application/json"},credentials:"include"}),t=await e.json();if(console.log(t),e.ok)t.username?(r.value="2",h.value=t.username):r.value="1";else throw new Error(t.message||`Request gagal: ${e.status}`);s.value="1"}catch(e){console.log(e),r.value="1",s.value="3"}},k=async()=>{try{const e=await fetch(`https://api.newseen.com/api/berita/category/${u.query.id}`,{method:"GET",headers:{accept:"application/json"},credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);p.value=t}catch(e){console.log(e)}},g=async()=>{s.value="2";try{await Promise.all([w(),k()]),s.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),s.value="3"}};return M(async()=>{g()}),B(()=>u.query.id,(e,t)=>{e!==t&&g()}),(e,t)=>s.value==="1"?(o(),i("div",G,[n("nav",J,[c(F,{status:r.value,user:h.value},null,8,["status","user"]),c(N)]),n("div",null,[r.value==="1"?(o(),y(D,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):m("",!0),c(q,{title:"Category Results",subtitle:`Here's the search results for category ${_(u).query.id}`},null,8,["subtitle"])]),n("div",V,[n("div",I,[n("div",L,[(o(!0),i(T,null,A(p.value,(a,d)=>(o(),y(E,{key:d,id:a.id_berita,title:a.judul,highlight:a.isi,link:`${_(f)}/storage/${a.gambar}`,date:v(a.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),c(R)])):s.value==="2"?(o(),i("div",O,[n("div",z,[c(S)])])):s.value==="3"?(o(),i("div",H,[...t[0]||(t[0]=[n("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):m("",!0)}};export{K as default};
