import{c as k,g as M,b as r,t as R,F as T,m as I,x as p,y as O,z as V,A as L,B as z,C as Y,D as j,r as y,E as H,o as q,a as F,d as _,w as B,u as P,h as U,i as Z,p as G,l as W}from"./index-BMjMTTFA.js";import{_ as X,I as K}from"./TextBox-CuAodwPa.js";import{b as J,_ as Q,a as ee,F as te,I as oe}from"./IconNewSeen-4eMHE73Y.js";import{l as E}from"./index-F-B_FrII.js";import{L as se}from"./LoopingRhombusesSpinner-DH94hhd3.js";const ae={for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},ne=["value","placeholder"],le={__name:"ExpandTextBox",props:{boxname:{type:String,default:"Nothing"},placeholder:{type:String,default:"No placeholder"},modelValue:{type:String}},emits:["update:modelValue"],setup(e){return(o,t)=>(M(),k(T,null,[r("label",ae,R(e.boxname),1),r("textarea",{value:e.modelValue,onInput:t[0]||(t[0]=i=>o.$emit("update:modelValue",i.target.value)),type:"text",id:"first_name",class:"bg-gray-50 border border-gray-300 text-sm rounded-lg placeholder-gray-500 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:e.placeholder,required:""},null,40,ne)],64))}};function N(e,o){return Y()?(j(e,o),!0):!1}const C=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,ie=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;function ue(e,o,t,i){let s=e<12?"AM":"PM";return i&&(s=s.split("").reduce((f,l)=>f+=`${l}.`,"")),t?s.toLowerCase():s}function S(e){const o=["th","st","nd","rd"],t=e%100;return e+(o[(t-20)%10]||o[t]||o[0])}function ce(e,o,t={}){var i;const s=e.getFullYear(),f=e.getMonth(),l=e.getDate(),u=e.getHours(),c=e.getMinutes(),d=e.getSeconds(),m=e.getMilliseconds(),w=e.getDay(),v=(i=t.customMeridiem)!==null&&i!==void 0?i:ue,g=D=>{var b;return(b=D.split(" ")[1])!==null&&b!==void 0?b:""},x={Yo:()=>S(s),YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>f+1,Mo:()=>S(f+1),MM:()=>`${f+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(p(t.locales),{month:"short"}),MMMM:()=>e.toLocaleDateString(p(t.locales),{month:"long"}),D:()=>String(l),Do:()=>S(l),DD:()=>`${l}`.padStart(2,"0"),H:()=>String(u),Ho:()=>S(u),HH:()=>`${u}`.padStart(2,"0"),h:()=>`${u%12||12}`.padStart(1,"0"),ho:()=>S(u%12||12),hh:()=>`${u%12||12}`.padStart(2,"0"),m:()=>String(c),mo:()=>S(c),mm:()=>`${c}`.padStart(2,"0"),s:()=>String(d),so:()=>S(d),ss:()=>`${d}`.padStart(2,"0"),SSS:()=>`${m}`.padStart(3,"0"),d:()=>w,dd:()=>e.toLocaleDateString(p(t.locales),{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(p(t.locales),{weekday:"short"}),dddd:()=>e.toLocaleDateString(p(t.locales),{weekday:"long"}),A:()=>v(u,c),AA:()=>v(u,c,!1,!0),a:()=>v(u,c,!0),aa:()=>v(u,c,!0,!0),z:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zzz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zzzz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"longOffset"}))};return o.replace(ie,(D,b)=>{var A,$;return(A=b??(($=x[D])===null||$===void 0?void 0:$.call(x)))!==null&&A!==void 0?A:D})}function de(e){if(e===null)return new Date(NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const o=e.match(re);if(o){const t=o[2]-1||0,i=(o[7]||"0").substring(0,3);return new Date(o[1],t,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)}}return new Date(e)}function fe(e,o="HH:mm:ss",t={}){return I(()=>ce(de(p(e)),p(o),t))}function me(e,o=1e3,t={}){const{immediate:i=!0,immediateCallback:s=!1}=t;let f=null;const l=O(!1);function u(){f&&(clearInterval(f),f=null)}function c(){l.value=!1,u()}function d(){const m=p(o);m<=0||(l.value=!0,s&&e(),u(),l.value&&(f=setInterval(e,m)))}return i&&C&&d(),(V(o)||typeof o=="function")&&N(L(o,()=>{l.value&&C&&d()})),N(c),{isActive:z(l),pause:c,resume:d}}const pe=C?window:void 0;function ve(e,o={}){const{immediate:t=!0,fpsLimit:i=void 0,window:s=pe,once:f=!1}=o,l=O(!1),u=I(()=>i?1e3/p(i):null);let c=0,d=null;function m(g){if(!l.value||!s)return;c||(c=g);const x=g-c;if(u.value&&x<u.value){d=s.requestAnimationFrame(m);return}if(c=g,e({delta:x,timestamp:g}),f){l.value=!1,d=null;return}d=s.requestAnimationFrame(m)}function w(){!l.value&&s&&(l.value=!0,c=0,d=s.requestAnimationFrame(m))}function v(){l.value=!1,d!=null&&s&&(s.cancelAnimationFrame(d),d=null)}return t&&w(),N(v),{isActive:H(l),pause:v,resume:w}}function ge(e={}){const{controls:o=!1,interval:t="requestAnimationFrame",immediate:i=!0}=e,s=y(new Date),f=()=>s.value=new Date,l=t==="requestAnimationFrame"?ve(f,{immediate:i}):me(f,t,{immediate:i});return o?{now:s,...l}:s}const he={key:0},ye={class:"font-sans"},be={class:"sticky top-0 z-100"},we={class:"py-20"},xe={class:"w-full flex flex-col gap-y-6 py-5 px-32"},_e={class:"merriweather-bold border rounded-lg border-black text-left font-sans text-3xl gap-y-10 flex flex-col py-15 px-15 font-bold text-gray-800"},Se={class:"flex flex-row"},De={class:"w-50 flex justify-center items-center"},ke=["disabled"],Me={key:0},Ae={key:1,class:"h-5 flex justify-center items-center"},$e={class:"flex flex-col gap-y-6"},Fe={class:"w-full h-full flex flex-col gap-y-3"},Ne={class:"w-full h-full flex flex-col gap-y-3"},Ce={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Ee={class:"animate-spin"},Ie={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Oe={__name:"CreateArticle",setup(e){const o=fe(ge(),"YYYY-MM-DD"),t=y("1"),i=y(null),s=y(!1),f=y(!1),l=y(!1),u=y(""),c=y(""),d=y(""),m=y("2"),w=W(),v=y([]),g=n=>{v.value=n},x=n=>{const h=`; ${document.cookie}`.split(`; ${n}=`);return h.length===2?decodeURIComponent(h.pop().split(";").shift()):null},D=async()=>{try{const n=await fetch("https://api.newseen.com/api/myinfo",{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"},credentials:"include"}),a=await n.json();if(n.status==401)t.value="1",w.push("/login");else if(n.ok)a.username&&a.role!="pembaca"?(t.value="2",i.value=a.username,l.value=a.role):w.push("/");else throw new Error(a.message||`Request gagal: ${n.status}`)}catch{t.value="1"}},b=n=>{E.error(`${n}`,{autoClose:2e3,position:E.POSITION.TOP_RIGHT})};function A(){return d.value.split(/\n+/).map(n=>n.trim()).filter(n=>n)}const $=async()=>{s.value=!0,f.value=!0;try{const n=new FormData;n.append("id_kategori",c.value),n.append("judul",u.value),n.append("isi",JSON.stringify(A())),n.append("tgl_terbit",o.value),v.value&&n.append("gambar",v.value);const a=await fetch("https://api.newseen.com/api/berita/",{method:"POST",headers:{accept:"application/json",Authorization:`Bearer ${x("access_token")}`,"X-XSRF-TOKEN":x("XSRF-TOKEN")},body:n,credentials:"include"}),h=await a.json();if(!a.ok)throw b(h.message||`Request gagal: ${a.status}`),new Error(h.message);w.push("/me")}catch(n){console.error("âŒ Error:",n),b(n.message||"Terjadi kesalahan")}finally{s.value=!1,f.value=!1}};return q(async()=>{await D(),m.value="1"}),(n,a)=>m.value==="1"?(M(),k("div",he,[r("div",ye,[r("nav",be,[_(Q,{status:t.value,user:i.value},null,8,["status","user"]),_(ee)]),r("div",we,[r("div",xe,[r("form",{onSubmit:B($,["prevent"])},[r("div",_e,[r("div",Se,[a[3]||(a[3]=r("div",{class:"w-full h-full flex flex-col gap-y-2"},[r("p",null,"Create Article"),r("p",{class:"text-xl"},"Share Your Ideas with the World.")],-1)),r("div",De,[r("button",{disabled:s.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[s.value?F("",!0):(M(),k("div",Me," Post Article ")),s.value?(M(),k("div",Ae,[_(P(se))])):F("",!0)],8,ke)])]),r("div",$e,[r("div",Fe,[_(X,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=h=>u.value=h),boxname:"Title",placeholder:"a news title..."},null,8,["modelValue"]),a[5]||(a[5]=r("label",{for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},"Category",-1)),U(r("select",{"onUpdate:modelValue":a[1]||(a[1]=h=>c.value=h),class:"text-base border border-black rounded h-10"},[...a[4]||(a[4]=[G('<option disabled value="0" data-v-bb78d5f4>-- Select Category --</option><option value="1" data-v-bb78d5f4>AI WORLD</option><option value="2" data-v-bb78d5f4>MOBILE</option><option value="3" data-v-bb78d5f4>NEWS</option><option value="4" data-v-bb78d5f4>COMPUTER</option>',5)])],512),[[Z,c.value]]),_(le,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=h=>d.value=h),boxname:"Article Body",placeholder:"type the news here..."},null,8,["modelValue"])]),r("div",Ne,[a[6]||(a[6]=r("label",{for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},"Image Covers",-1)),_(K,{"onUpdate:file":g,maxwidth:"5000",maxheight:"5000"})])])])],32)])])]),_(te)])):m.value==="2"?(M(),k("div",Ce,[r("div",Ee,[_(oe)])])):m.value==="3"?(M(),k("div",Ie,[...a[7]||(a[7]=[r("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):F("",!0)}},Ye=J(Oe,[["__scopeId","data-v-bb78d5f4"]]);export{Ye as default};
