import{_ as C,a as I,F as B,I as O}from"./IconNewSeen-BZEH1aMv.js";import{_ as g,a as H,b as w}from"./CardNews-C7kylbaT.js";import{r as i,o as J,c,a as $,b as a,d as l,e as u,F as f,f as _,g as o,u as v}from"./index-BDEM5uhp.js";const V={key:0},X={class:"sticky top-0 z-100"},K={class:"sm:px-8 lg:px-16 py-5"},L={class:"w-full h-full py-5 overflow-x-auto"},U={class:"flex flex-nowrap gap-x-7 py-5"},W={class:"sm:px-8 lg:px-16 py-5"},z={class:"w-full h-full py-5 overflow-x-auto"},P={class:"flex flex-nowrap gap-x-7 py-5"},Y={class:"sm:px-8 lg:px-16 py-5"},Q={class:"w-full h-full py-5 overflow-x-auto"},Z={class:"flex flex-nowrap gap-x-7 py-5"},ee={class:"sm:px-8 lg:px-16 py-5"},te={class:"w-full h-full py-5 overflow-x-auto"},se={class:"flex flex-nowrap gap-x-7 py-5"},ae={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},oe={class:"animate-spin"},ne={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},ue={__name:"Dashboard",setup(re){const j=i([]),n=i("2"),h=i("1"),y=i(null),m=i(),b=i(),k=i(),x=i(),d="https://api.newseen.com",E=e=>{const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2?decodeURIComponent(t.pop().split(";").shift()):null},p=e=>{const s=new Date(e),t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],M=t[s.getDay()],D=s.getDate(),q=r[s.getMonth()],A=s.getFullYear();return`${M}, ${D} ${q} ${A}`},F=async()=>{try{const e=await fetch("https://api.newseen.com/api/myinfo",{method:"GET",headers:{accept:"application/json","X-XSRF-TOKEN":E("XSRF-TOKEN")},credentials:"include"}),s=await e.json();if(e.ok)s.username?(h.value="2",y.value=s.username):h.value="1";else throw new Error(s.message||`Request gagal: ${e.status}`);n.value="1"}catch(e){console.log(e)}},N=async()=>{try{const e=await fetch("https://api.newseen.com/api/berita/category/1",{method:"GET",headers:{accept:"application/json"}}),s=await e.json();if(!e.ok)throw new Error(s.message||`Request gagal: ${e.status}`);m.value=s}catch(e){console.log(e),n.value="3"}},R=async()=>{try{const e=await fetch("https://api.newseen.com/api/berita/category/2",{method:"GET",headers:{accept:"application/json"}}),s=await e.json();if(!e.ok)throw new Error(s.message||`Request gagal: ${e.status}`);b.value=s}catch{n.value="3"}},T=async()=>{try{const e=await fetch("https://api.newseen.com/api/berita/category/3",{method:"GET",headers:{accept:"application/json"}}),s=await e.json();if(!e.ok)throw new Error(s.message||`Request gagal: ${e.status}`);k.value=s}catch{n.value="3"}},G=async()=>{try{const e=await fetch("https://api.newseen.com/api/berita/category/4",{method:"GET",headers:{accept:"application/json"}}),s=await e.json();if(!e.ok)throw new Error(s.message||`Request gagal: ${e.status}`);x.value=s}catch(e){console.log(e)}},S=async()=>{try{const e=await fetch("https://jsonplaceholder.typicode.com/posts");if(!e.ok)throw new Error("Gagal mengambil berita");const s=await e.json();j.value=s.slice(0,5).map(t=>({title:t.title,description:t.body,image:"https://picsum.photos/400/250?random="+Math.random()}))}catch(e){throw console.error("Error fetchNews:",e),e}};return J(async()=>{n.value="2";try{await Promise.all([F(),S(),N(),R(),T(),G()]),n.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),n.value="3"}}),(e,s)=>n.value==="1"?(o(),c("div",V,[a("nav",X,[l(C,{status:h.value,user:y.value},null,8,["status","user"]),l(I)]),a("div",null,[h.value==="1"?(o(),u(H,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):$("",!0),l(g,{title:"Everything News",subtitle:"A collection of our most recent news and articles."})]),a("div",K,[a("div",L,[a("div",U,[(o(!0),c(f,null,_(k.value,(t,r)=>(o(),u(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${v(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),a("div",null,[l(g,{title:"Get ready for New Mobile",subtitle:"Here's what our readers are recommending and appreciating."})]),a("div",W,[a("div",z,[a("div",P,[(o(!0),c(f,null,_(b.value,(t,r)=>(o(),u(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${v(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),a("div",null,[l(g,{title:"Whats up AI!",subtitle:"Here's what happens now about Artificial Intelligence."})]),a("div",Y,[a("div",Q,[a("div",Z,[(o(!0),c(f,null,_(m.value,(t,r)=>(o(),u(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${v(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),a("div",null,[l(g,{title:"Computers Everywhere!",subtitle:"Here's what our readers are recommending and appreciating."})]),a("div",ee,[a("div",te,[a("div",se,[(o(!0),c(f,null,_(x.value,(t,r)=>(o(),u(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${v(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),l(B)])):n.value==="2"?(o(),c("div",ae,[a("div",oe,[l(O)])])):n.value==="3"?(o(),c("div",ne,[...s[0]||(s[0]=[a("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):$("",!0)}};export{ue as default};
