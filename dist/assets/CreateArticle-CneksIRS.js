import{c as k,g as M,b as r,t as R,F as T,m as I,x as p,y as O,z as V,A as L,B as Y,C as z,D as j,r as y,E as H,o as q,a as F,d as S,w as B,u as P,h as U,i as Z,p as G,l as W}from"./index-BDEM5uhp.js";import{_ as X,I as K}from"./TextBox-BbqwS2EL.js";import{b as J,_ as Q,a as ee,F as te,I as oe}from"./IconNewSeen-BZEH1aMv.js";import{l as E}from"./index-CY3PEhU-.js";import{L as ae}from"./LoopingRhombusesSpinner-BOHGaTpo.js";const se={for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},ne=["value","placeholder"],le={__name:"ExpandTextBox",props:{boxname:{type:String,default:"Nothing"},placeholder:{type:String,default:"No placeholder"},modelValue:{type:String}},emits:["update:modelValue"],setup(e){return(o,t)=>(M(),k(T,null,[r("label",se,R(e.boxname),1),r("textarea",{value:e.modelValue,onInput:t[0]||(t[0]=i=>o.$emit("update:modelValue",i.target.value)),type:"text",id:"first_name",class:"bg-gray-50 border border-gray-300 text-sm rounded-lg placeholder-gray-500 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:e.placeholder,required:""},null,40,ne)],64))}};function N(e,o){return z()?(j(e,o),!0):!1}const C=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,ie=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;function ue(e,o,t,i){let a=e<12?"AM":"PM";return i&&(a=a.split("").reduce((f,l)=>f+=`${l}.`,"")),t?a.toLowerCase():a}function b(e){const o=["th","st","nd","rd"],t=e%100;return e+(o[(t-20)%10]||o[t]||o[0])}function ce(e,o,t={}){var i;const a=e.getFullYear(),f=e.getMonth(),l=e.getDate(),u=e.getHours(),c=e.getMinutes(),d=e.getSeconds(),m=e.getMilliseconds(),x=e.getDay(),v=(i=t.customMeridiem)!==null&&i!==void 0?i:ue,g=D=>{var w;return(w=D.split(" ")[1])!==null&&w!==void 0?w:""},_={Yo:()=>b(a),YY:()=>String(a).slice(-2),YYYY:()=>a,M:()=>f+1,Mo:()=>b(f+1),MM:()=>`${f+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(p(t.locales),{month:"short"}),MMMM:()=>e.toLocaleDateString(p(t.locales),{month:"long"}),D:()=>String(l),Do:()=>b(l),DD:()=>`${l}`.padStart(2,"0"),H:()=>String(u),Ho:()=>b(u),HH:()=>`${u}`.padStart(2,"0"),h:()=>`${u%12||12}`.padStart(1,"0"),ho:()=>b(u%12||12),hh:()=>`${u%12||12}`.padStart(2,"0"),m:()=>String(c),mo:()=>b(c),mm:()=>`${c}`.padStart(2,"0"),s:()=>String(d),so:()=>b(d),ss:()=>`${d}`.padStart(2,"0"),SSS:()=>`${m}`.padStart(3,"0"),d:()=>x,dd:()=>e.toLocaleDateString(p(t.locales),{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(p(t.locales),{weekday:"short"}),dddd:()=>e.toLocaleDateString(p(t.locales),{weekday:"long"}),A:()=>v(u,c),AA:()=>v(u,c,!1,!0),a:()=>v(u,c,!0),aa:()=>v(u,c,!0,!0),z:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zzz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"shortOffset"})),zzzz:()=>g(e.toLocaleDateString(p(t.locales),{timeZoneName:"longOffset"}))};return o.replace(ie,(D,w)=>{var A,$;return(A=w??(($=_[D])===null||$===void 0?void 0:$.call(_)))!==null&&A!==void 0?A:D})}function de(e){if(e===null)return new Date(NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const o=e.match(re);if(o){const t=o[2]-1||0,i=(o[7]||"0").substring(0,3);return new Date(o[1],t,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)}}return new Date(e)}function fe(e,o="HH:mm:ss",t={}){return I(()=>ce(de(p(e)),p(o),t))}function me(e,o=1e3,t={}){const{immediate:i=!0,immediateCallback:a=!1}=t;let f=null;const l=O(!1);function u(){f&&(clearInterval(f),f=null)}function c(){l.value=!1,u()}function d(){const m=p(o);m<=0||(l.value=!0,a&&e(),u(),l.value&&(f=setInterval(e,m)))}return i&&C&&d(),(V(o)||typeof o=="function")&&N(L(o,()=>{l.value&&C&&d()})),N(c),{isActive:Y(l),pause:c,resume:d}}const pe=C?window:void 0;function ve(e,o={}){const{immediate:t=!0,fpsLimit:i=void 0,window:a=pe,once:f=!1}=o,l=O(!1),u=I(()=>i?1e3/p(i):null);let c=0,d=null;function m(g){if(!l.value||!a)return;c||(c=g);const _=g-c;if(u.value&&_<u.value){d=a.requestAnimationFrame(m);return}if(c=g,e({delta:_,timestamp:g}),f){l.value=!1,d=null;return}d=a.requestAnimationFrame(m)}function x(){!l.value&&a&&(l.value=!0,c=0,d=a.requestAnimationFrame(m))}function v(){l.value=!1,d!=null&&a&&(a.cancelAnimationFrame(d),d=null)}return t&&x(),N(v),{isActive:H(l),pause:v,resume:x}}function ge(e={}){const{controls:o=!1,interval:t="requestAnimationFrame",immediate:i=!0}=e,a=y(new Date),f=()=>a.value=new Date,l=t==="requestAnimationFrame"?ve(f,{immediate:i}):me(f,t,{immediate:i});return o?{now:a,...l}:a}const he={key:0},ye={class:"font-sans"},we={class:"sticky top-0 z-100"},xe={class:"py-20"},Se={class:"w-full flex flex-col gap-y-6 py-5 px-32"},_e={class:"merriweather-bold border rounded-lg border-black text-left font-sans text-3xl gap-y-10 flex flex-col py-15 px-15 font-bold text-gray-800"},be={class:"flex flex-row"},De={class:"w-50 flex justify-center items-center"},ke=["disabled"],Me={key:0},Ae={key:1,class:"h-5 flex justify-center items-center"},$e={class:"flex flex-col gap-y-6"},Fe={class:"w-full h-full flex flex-col gap-y-3"},Ne={class:"w-full h-full flex flex-col gap-y-3"},Ce={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Ee={class:"animate-spin"},Ie={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Oe={__name:"CreateArticle",setup(e){const o=fe(ge(),"YYYY-MM-DD"),t=y("1"),i=y(null),a=y(!1),f=y(!1),l=y(!1),u=y(""),c=y(""),d=y(""),m=y("2"),x=W(),v=y([]),g=n=>{v.value=n},_=n=>{const h=`; ${document.cookie}`.split(`; ${n}=`);return h.length===2?decodeURIComponent(h.pop().split(";").shift()):null},D=async()=>{try{const n=await fetch("https://api.newseen.com/api/myinfo",{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"},credentials:"include"}),s=await n.json();if(n.status==401)t.value="1",x.push("/login");else if(n.ok)s.username&&s.role!="pembaca"?(t.value="2",i.value=s.username,l.value=s.role):x.push("/");else throw new Error(s.message||`Request gagal: ${n.status}`)}catch{t.value="1"}},w=n=>{E.error(`${n}`,{autoClose:2e3,position:E.POSITION.TOP_RIGHT})};function A(){return d.value.split(/\n+/).map(n=>n.trim()).filter(n=>n)}const $=async()=>{a.value=!0,f.value=!0;try{const n=new FormData;n.append("id_kategori",c.value),n.append("judul",u.value),n.append("isi",JSON.stringify(A())),n.append("tgl_terbit",o.value),v.value&&n.append("gambar",v.value);const s=await fetch("https://api.newseen.com/api/berita/",{method:"POST",headers:{accept:"application/json","X-XSRF-TOKEN":_("XSRF-TOKEN")},body:n,credentials:"include"}),h=await s.json();if(!s.ok)throw w(h.message||`Request gagal: ${s.status}`),new Error(h.message);x.push("/me")}catch(n){console.error("âŒ Error:",n),w(n.message||"Terjadi kesalahan")}finally{a.value=!1,f.value=!1}};return q(async()=>{await D(),m.value="1"}),(n,s)=>m.value==="1"?(M(),k("div",he,[r("div",ye,[r("nav",we,[S(Q,{status:t.value,user:i.value},null,8,["status","user"]),S(ee)]),r("div",xe,[r("div",Se,[r("form",{onSubmit:B($,["prevent"])},[r("div",_e,[r("div",be,[s[3]||(s[3]=r("div",{class:"w-full h-full flex flex-col gap-y-2"},[r("p",null,"Create Article"),r("p",{class:"text-xl"},"Share Your Ideas with the World.")],-1)),r("div",De,[r("button",{disabled:a.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[a.value?F("",!0):(M(),k("div",Me," Post Article ")),a.value?(M(),k("div",Ae,[S(P(ae))])):F("",!0)],8,ke)])]),r("div",$e,[r("div",Fe,[S(X,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=h=>u.value=h),boxname:"Title",placeholder:"a news title..."},null,8,["modelValue"]),s[5]||(s[5]=r("label",{for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},"Category",-1)),U(r("select",{"onUpdate:modelValue":s[1]||(s[1]=h=>c.value=h),class:"text-base border border-black rounded h-10"},[...s[4]||(s[4]=[G('<option disabled value="0" data-v-e0c0da56>-- Select Category --</option><option value="1" data-v-e0c0da56>AI WORLD</option><option value="2" data-v-e0c0da56>MOBILE</option><option value="3" data-v-e0c0da56>NEWS</option><option value="4" data-v-e0c0da56>COMPUTER</option>',5)])],512),[[Z,c.value]]),S(le,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=h=>d.value=h),boxname:"Article Body",placeholder:"type the news here..."},null,8,["modelValue"])]),r("div",Ne,[s[6]||(s[6]=r("label",{for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},"Image Covers",-1)),S(K,{"onUpdate:file":g,maxwidth:"5000",maxheight:"5000"})])])])],32)])])]),S(te)])):m.value==="2"?(M(),k("div",Ce,[r("div",Ee,[S(oe)])])):m.value==="3"?(M(),k("div",Ie,[...s[7]||(s[7]=[r("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):F("",!0)}},ze=J(Oe,[["__scopeId","data-v-e0c0da56"]]);export{ze as default};
