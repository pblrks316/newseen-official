import{_ as F,a as N,F as C,I as S}from"./IconNewSeen-CsoBzXES.js";import{_ as q,a as B,b as D}from"./CardNews-DmHNL6Yk.js";import{r as l,o as E,A as M,c as i,a as y,b as o,d as c,e as f,u as g,s as A,F as T,f as G,g as n}from"./index-ZIXpssEa.js";const I={key:0},J={class:"sticky top-0 z-100"},V={class:"sm:px-8 lg:px-16 h-full py-5"},z={class:"w-full h-full py-5 overflow-x-auto"},L={class:"flex flex-nowrap gap-x-7 py-5"},O={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},U={class:"animate-spin"},H={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Q={__name:"CategoryResults",setup(P){const u=A(),a=l("2"),r=l("1"),d=l(null),p=l(),m="http://localhost:8000",v=e=>{const t=new Date(e),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=s[t.getDay()],b=t.getDate(),j=h[t.getMonth()],R=t.getFullYear();return`${x}, ${b} ${j} ${R}`},k=e=>{const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2?decodeURIComponent(s.pop().split(";").shift()):null},$=async()=>{try{const e=await fetch("http://localhost:8000/api/myinfo",{method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${k("access_token")}`}}),t=await e.json();if(e.ok)t.username?(r.value="2",d.value=t.username):r.value="1";else throw new Error(t.message||`Request gagal: ${e.status}`);a.value="1"}catch{r.value="1",a.value="3"}},w=async()=>{try{const e=await fetch(`http://localhost:8000/api/berita/category/${u.query.id}`,{method:"GET",headers:{accept:"application/json"}}),t=await e.json();if(!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);p.value=t}catch{}},_=async()=>{a.value="2";try{await Promise.all([$(),w()]),a.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),a.value="3"}};return E(async()=>{_()}),M(()=>u.query.id,(e,t)=>{e!==t&&_()}),(e,t)=>a.value==="1"?(n(),i("div",I,[o("nav",J,[c(F,{status:r.value,user:d.value},null,8,["status","user"]),c(N)]),o("div",null,[r.value==="1"?(n(),f(B,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):y("",!0),c(q,{title:"Category Results",subtitle:`Here's the search results for category ${g(u).query.id}`},null,8,["subtitle"])]),o("div",V,[o("div",z,[o("div",L,[(n(!0),i(T,null,G(p.value,(s,h)=>(n(),f(D,{key:h,id:s.id_berita,title:s.judul,highlight:s.isi,link:`${g(m)}/storage/${s.gambar}`,date:v(s.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),c(C)])):a.value==="2"?(n(),i("div",O,[o("div",U,[c(S)])])):a.value==="3"?(n(),i("div",H,[...t[0]||(t[0]=[o("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):y("",!0)}};export{Q as default};
