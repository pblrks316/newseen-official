import{r as n,c as u,b as e,w as L,h as p,v,i as T,a as x,d as c,u as m,j as a,k as w,R as g,l as E,g as f}from"./index-ZIXpssEa.js";import{l as h}from"./index-Dh2lQxpt.js";import{L as N}from"./LoopingRhombusesSpinner-CpjssiH5.js";const O={class:"flex items-center justify-center min-h-screen"},U={class:"w-90 max-w-md p-8 gap-y-6 rounded-lg"},V={class:"mt-1 pb-3"},j={class:"mt-1 pb-5"},C={class:"mt-1 pb-5"},$={class:"pb-4"},P=["disabled"],B={key:0},D={key:1,class:"h-5 flex justify-center items-center"},I={class:"text-center"},A={class:"text-sm text-rose-700"},M={href:"#",class:"font-medium text-rose-600 hover:underline"},W={class:"text-center"},X={class:"text-sm text-rose-700"},q={href:"#",class:"font-medium text-rose-600 hover:underline"},z={__name:"LoginPage",setup(F){const y="http://localhost:8000",_=E(),l=n(""),i=n(""),d=n(""),r=n(!1),b=n(!1),k=o=>{h.error(`Login Error: ${o}`,{autoClose:2e3,position:h.POSITION.TOP_RIGHT})},R=o=>{const t=`; ${document.cookie}`.split(`; ${o}=`);return t.length===2?decodeURIComponent(t.pop().split(";").shift()):null},S=async()=>{r.value=!0,b.value=!0;try{await fetch("http://localhost:8000/sanctum/csrf-cookie",{credentials:"include"});const o=await fetch(`${y}/api/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-XSRF-TOKEN":R("XSRF-TOKEN")},body:JSON.stringify({email:l.value,password:i.value,role:d.value}),credentials:"include"});if(o.ok)_.push("/");else{const s=await o.json();throw new Error(s.message||"Email atau password salah")}}catch(o){k(o.message)}finally{r.value=!1,b.value=!1}};return(o,s)=>(f(),u("div",O,[e("div",U,[s[11]||(s[11]=e("div",null,[e("h2",{class:"text-2xl pb-3 font-bold text-center text-rose-900"}," Welcome back, readers! "),e("p",{class:"mt-2 text-sm pb-3 text-center text-rose-700"}," We've rounded up the latest stories you need to know. ")],-1)),e("form",{class:"gap-y-6",onSubmit:L(S,["prevent"])},[e("div",null,[s[3]||(s[3]=e("label",{for:"email",class:"block pb-2 text-sm font-medium text-rose-900"}," Email ",-1)),e("div",V,[p(e("input",{id:"email",name:"email",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[v,l.value]])])]),e("div",null,[s[4]||(s[4]=e("label",{for:"password",class:"block pb-2 text-sm font-medium text-rose-900"}," Password ",-1)),e("div",j,[p(e("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[v,i.value]])])]),e("div",null,[s[6]||(s[6]=e("label",{for:"password",class:"block pb-2 text-sm font-medium text-rose-900"}," Roles ",-1)),e("div",C,[p(e("select",{id:"countries","onUpdate:modelValue":s[2]||(s[2]=t=>d.value=t),class:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},[...s[5]||(s[5]=[e("option",{disabled:"",value:""},"Select Role",-1),e("option",{value:"penulis"},"Writer",-1),e("option",{value:"pembaca"},"Reader",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[T,d.value]])])]),e("div",$,[e("button",{disabled:r.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[r.value?x("",!0):(f(),u("div",B," Sign in ")),r.value?(f(),u("div",D,[c(m(N))])):x("",!0)],8,P)])],32),e("div",I,[e("p",A,[s[8]||(s[8]=a(" Don't have an account yet? ",-1)),e("a",M,[c(m(g),{to:"/signup"},{default:w(()=>[...s[7]||(s[7]=[a("Sign up here.",-1)])]),_:1})])])]),e("div",W,[e("p",X,[s[10]||(s[10]=a(" Lost your password? ",-1)),e("a",q,[c(m(g),{to:"/change-pass"},{default:w(()=>[...s[9]||(s[9]=[a("Reset your password here.",-1)])]),_:1})])])])])]))}};export{z as default};
