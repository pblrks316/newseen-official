import{_ as A,a as B,F as I,I as C}from"./IconNewSeen-CsoBzXES.js";import{_ as g,a as H,b as w}from"./CardNews-DmHNL6Yk.js";import{r as l,o as J,c,a as $,b as s,d as i,e as h,F as _,f,g as o,u as y}from"./index-ZIXpssEa.js";const V={key:0},L={class:"sticky top-0 z-100"},O={class:"sm:px-8 lg:px-16 py-5"},W={class:"w-full h-full py-5 overflow-x-auto"},z={class:"flex flex-nowrap gap-x-7 py-5"},P={class:"sm:px-8 lg:px-16 py-5"},U={class:"w-full h-full py-5 overflow-x-auto"},Y={class:"flex flex-nowrap gap-x-7 py-5"},K={class:"sm:px-8 lg:px-16 py-5"},Q={class:"w-full h-full py-5 overflow-x-auto"},X={class:"flex flex-nowrap gap-x-7 py-5"},Z={class:"sm:px-8 lg:px-16 py-5"},ee={class:"w-full h-full py-5 overflow-x-auto"},te={class:"flex flex-nowrap gap-x-7 py-5"},ae={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},se={class:"animate-spin"},oe={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},ce={__name:"Dashboard",setup(ne){const j=l([]),n=l("2"),u=l("1"),v=l(null),m=l(),b=l(),x=l(),k=l(),d="http://localhost:8000",p=e=>{const a=new Date(e),t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=t[a.getDay()],R=a.getDate(),S=r[a.getMonth()],q=a.getFullYear();return`${D}, ${R} ${S} ${q}`},E=async()=>{try{const e=await fetch("http://localhost:8000/api/myinfo",{method:"GET",headers:{accept:"application/json"},credentials:"include"}),a=await e.json();if(e.ok)a.username?(u.value="2",v.value=a.username):u.value="1";else throw new Error(a.message||`Request gagal: ${e.status}`);n.value="1"}catch{}},F=async()=>{try{const e=await fetch("http://localhost:8000/api/berita/category/1",{method:"GET",headers:{accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(a.message||`Request gagal: ${e.status}`);m.value=a}catch{n.value="3"}},N=async()=>{try{const e=await fetch("http://localhost:8000/api/berita/category/2",{method:"GET",headers:{accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(a.message||`Request gagal: ${e.status}`);b.value=a}catch{n.value="3"}},G=async()=>{try{const e=await fetch("http://localhost:8000/api/berita/category/3",{method:"GET",headers:{accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(a.message||`Request gagal: ${e.status}`);x.value=a}catch{n.value="3"}},M=async()=>{try{const e=await fetch("http://localhost:8000/api/berita/category/4",{method:"GET",headers:{accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(a.message||`Request gagal: ${e.status}`);k.value=a}catch{}},T=async()=>{try{const e=await fetch("https://jsonplaceholder.typicode.com/posts");if(!e.ok)throw new Error("Gagal mengambil berita");const a=await e.json();j.value=a.slice(0,5).map(t=>({title:t.title,description:t.body,image:"https://picsum.photos/400/250?random="+Math.random()}))}catch(e){throw console.error("Error fetchNews:",e),e}};return J(async()=>{n.value="2";try{await Promise.all([E(),T(),F(),N(),G(),M()]),n.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),n.value="3"}}),(e,a)=>n.value==="1"?(o(),c("div",V,[s("nav",L,[i(A,{status:u.value,user:v.value},null,8,["status","user"]),i(B)]),s("div",null,[u.value==="1"?(o(),h(H,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):$("",!0),i(g,{title:"Everything News",subtitle:"A collection of our most recent news and articles."})]),s("div",O,[s("div",W,[s("div",z,[(o(!0),c(_,null,f(x.value,(t,r)=>(o(),h(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${y(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),s("div",null,[i(g,{title:"Get ready for New Mobile",subtitle:"Here's what our readers are recommending and appreciating."})]),s("div",P,[s("div",U,[s("div",Y,[(o(!0),c(_,null,f(b.value,(t,r)=>(o(),h(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${y(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),s("div",null,[i(g,{title:"Whats up AI!",subtitle:"Here's what happens now about Artificial Intelligence."})]),s("div",K,[s("div",Q,[s("div",X,[(o(!0),c(_,null,f(m.value,(t,r)=>(o(),h(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${y(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),s("div",null,[i(g,{title:"Computers Everywhere!",subtitle:"Here's what our readers are recommending and appreciating."})]),s("div",Z,[s("div",ee,[s("div",te,[(o(!0),c(_,null,f(k.value,(t,r)=>(o(),h(w,{key:r,id:t.id_berita,title:t.judul,highlight:t.isi,link:`${y(d)}/storage/${t.gambar}`,date:p(t.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),i(I)])):n.value==="2"?(o(),c("div",ae,[s("div",se,[i(C)])])):n.value==="3"?(o(),c("div",oe,[...a[0]||(a[0]=[s("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):$("",!0)}};export{ce as default};
